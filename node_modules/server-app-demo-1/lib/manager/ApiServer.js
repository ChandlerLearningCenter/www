/*global */

Ext.define('demo1.manager.ApiServer', {
    extend: 'Ext.ux.app.special.ApiServer',

    addRoutes: function (o) {
        var dataProvider = this.getManager('data'),
            mainManager = this.getManager('main'),  
            config = this.config || {},
            me = this,
            requireStopped, requireToken, requireTokenStopped, rootPath;


        requireStopped = {
            requireStopped: true
        };
        requireToken = {
            requireToken: config.enableTokens
        };
        requireTokenStopped = {
            requireToken: config.enableTokens,
            requireStopped: true
        };


        rootPath = this.config.rootPath + this.config.path;
        
        
        me.routeAsync(rootPath + 'test', dataProvider.testMongo, dataProvider);  
        
     
        me.routeAsync(rootPath + 'user', dataProvider.getUserList, dataProvider);     
       
        
        me.routeAsync(rootPath + 'start', mainManager.start, mainManager, requireTokenStopped);
        me.routeAsync(rootPath + 'stop', mainManager.stop, mainManager, requireToken);
        me.routeAsync(rootPath + 'health', mainManager.getHealth, mainManager);
        me.routeAsync(rootPath + 'state', mainManager.getState, mainManager);
        me.routeAsync(rootPath + 'version', mainManager.getVersion, mainManager);
        me.routeAsync(rootPath, mainManager.getState, mainManager);


        this.handleSuccess(o);
    }

});